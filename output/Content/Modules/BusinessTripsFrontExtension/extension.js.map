{"version":3,"file":"extension.js","sources":["../../../../src/EventHandlers/SomeEventHandlers.ts","../../../../src/Index.ts"],"sourcesContent":["import { DateTimePicker } from \"@docsvision/webclient/Platform/DateTimePicker\";\r\nimport { NumberControl } from \"@docsvision/webclient/Platform/Number\";\r\nimport { IEventArgs } from \"@docsvision/webclient/System/IEventArgs\";\r\nimport { Layout } from \"@docsvision/webclient/System/Layout\";\r\nimport { layoutManager } from \"@docsvision/webclient/System/LayoutManager\";\r\nimport { func } from \"prop-types\";\r\n\r\n//В разметке на «редактирование»: при изменении контролов «Даты командировки С:» или «по:» \r\n//и, если заполнены оба поля необходимо рассчитать кол-во дней в командировке и записать \r\n//в поле «Кол-во дней в командировке».\r\nexport async function dateSince_ChangeData(sender: DateTimePicker) {\r\n\tawait SetTripDaysValue(sender);\r\n}\r\n\r\nexport async function dateTill_ChangeData(sender: DateTimePicker) {\r\n\tawait SetTripDaysValue(sender);\r\n}\r\n\r\nasync function SetTripDaysValue(sender: DateTimePicker) {\r\n\tlet layout = sender.layout;\r\n\tlet tripDaysContol = layout.controls.tryGet<NumberControl>(\"tripDays\");\r\n\tlet otherDateContolName = sender.params.name == \"dateSince\" ? \"dateTill\" : \"dateSince\";\r\n\tlet otherDateContol = layout.controls.tryGet<DateTimePicker>(otherDateContolName);\r\n\r\n\ttripDaysContol.value = GetDateDifference(sender, otherDateContol);\r\n}\r\n\r\nfunction GetDateDifference(sender: DateTimePicker, otherDateContol: DateTimePicker) {\r\n\tlet senderDate = sender.value;\r\n\tlet otherDate = otherDateContol.value;\r\n\tlet senderDateOnly = senderDate.setHours(0, 0, 0, 0);\r\n\tlet otherDateOnly = otherDate.setHours(0, 0, 0, 0);\r\n\tlet milliseconds = Math.abs(senderDateOnly - otherDateOnly);\r\n\tlet millisecondsPerDay = 1000 * 60 * 60 * 24;\r\n\treturn Math.floor(milliseconds / millisecondsPerDay);\r\n}\r\n\r\n\r\n","﻿import * as SomeEventHandlers from \"./EventHandlers/SomeEventHandlers\";\r\nimport { extensionManager } from \"@docsvision/webclient/System/ExtensionManager\";\r\n\r\n\r\n// Главная входная точка всего расширения\r\n// Данный файл должен импортировать прямо или косвенно все остальные файлы, \r\n// чтобы rollup смог собрать их все в один бандл.\r\n\r\n// Регистрация расширения позволяет корректно установить все\r\n// обработчики событий, сервисы и прочие сущности web-приложения.\r\nextensionManager.registerExtension({\r\n    name: \"Template front extension\",\r\n    version: \"5.5.15\",\r\n    globalEventHandlers: [ SomeEventHandlers ]\r\n\r\n})"],"names":["extensionManager"],"mappings":";;CAOA;CACA;CACA;UACsB,oBAAoB,CAAC,MAAsB;;;;yBAChE,qBAAM,gBAAgB,CAAC,MAAM,CAAC,EAAA;;qBAA9B,SAA8B,CAAC;;;;;EAC/B;UAEqB,mBAAmB,CAAC,MAAsB;;;;yBAC/D,qBAAM,gBAAgB,CAAC,MAAM,CAAC,EAAA;;qBAA9B,SAA8B,CAAC;;;;;EAC/B;CAED,SAAe,gBAAgB,CAAC,MAAsB;;;;aACjD,MAAM,GAAG,MAAM,CAAC,MAAM,CAAC;aACvB,cAAc,GAAG,MAAM,CAAC,QAAQ,CAAC,MAAM,CAAgB,UAAU,CAAC,CAAC;aACnE,mBAAmB,GAAG,MAAM,CAAC,MAAM,CAAC,IAAI,IAAI,WAAW,GAAG,UAAU,GAAG,WAAW,CAAC;aACnF,eAAe,GAAG,MAAM,CAAC,QAAQ,CAAC,MAAM,CAAiB,mBAAmB,CAAC,CAAC;aAElF,cAAc,CAAC,KAAK,GAAG,iBAAiB,CAAC,MAAM,EAAE,eAAe,CAAC,CAAC;;;;EAClE;CAED,SAAS,iBAAiB,CAAC,MAAsB,EAAE,eAA+B;KACjF,IAAI,UAAU,GAAG,MAAM,CAAC,KAAK,CAAC;KAC9B,IAAI,SAAS,GAAG,eAAe,CAAC,KAAK,CAAC;KACtC,IAAI,cAAc,GAAG,UAAU,CAAC,QAAQ,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;KACrD,IAAI,aAAa,GAAG,SAAS,CAAC,QAAQ,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;KACnD,IAAI,YAAY,GAAG,IAAI,CAAC,GAAG,CAAC,cAAc,GAAG,aAAa,CAAC,CAAC;KAC5D,IAAI,kBAAkB,GAAG,IAAI,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,CAAC;KAC7C,OAAO,IAAI,CAAC,KAAK,CAAC,YAAY,GAAG,kBAAkB,CAAC,CAAC;CACtD;;;;;;;;CC/BA;CACA;CACA;CAEA;CACA;AACAA,kCAAgB,CAAC,iBAAiB,CAAC;KAC/B,IAAI,EAAE,0BAA0B;KAChC,OAAO,EAAE,QAAQ;KACjB,mBAAmB,EAAE,CAAE,iBAAiB,CAAE;EAE7C,CAAC;;;;"}